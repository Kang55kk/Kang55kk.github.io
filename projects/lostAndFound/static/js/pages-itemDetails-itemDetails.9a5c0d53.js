(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-itemDetails-itemDetails"],{1282:function(t,e,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,o=i(n("8785"));n("caad"),n("2532");var s={props:{lostItemInfo:Object},data:function(){return{a:!1}},computed:{collected:function(){var t,e;return null===(t=this.lostItemInfo)||void 0===t||null===(e=t.collectingUsers)||void 0===e?void 0:e.includes(this.userInfo._id)},operate:function(){return this.collected?"cancel":"collect"}},methods:{comment:function(){console.log("comment"),this.$emit("showPopup")},collect:function(){var t=this;if(this.userInfo){var e={loseId:this.lostItemInfo._id,operate:this.operate,userId:this.userInfo._id};uni.request({url:this.apiRoot(a||(a=(0,o.default)(["collect"]))),data:e,success:function(e){t.$emit("getLoseDetail",e.data.data)}})}else this.checkLoginStatus()}}};e.default=s},"15a9":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"uni-view[data-v-040b437f]{display:flex;justify-content:center;align-items:center}uni-image[data-v-040b437f]{width:100%;height:%?50?%}.detailBottom[data-v-040b437f]{height:%?100?%;background-color:#fff;width:100%;position:fixed;bottom:0;margin-bottom:-5px;padding-bottom:5px;border-top:1px solid #f3f3f3}.detailBottom .left[data-v-040b437f]{width:70%;height:100%}.detailBottom .left uni-input[data-v-040b437f]{background-color:#f2f2f2;height:%?60?%;width:90%;border-radius:24px;padding:5px 15px;box-sizing:border-box;color:#b4b1b1}.detailBottom .right[data-v-040b437f]{justify-content:space-evenly;width:30%}.detailBottom .right .item[data-v-040b437f]{width:%?40?%;flex-direction:column}.detailBottom .right .item uni-text[data-v-040b437f]{display:block;font-size:%?20?%;white-space:nowrap}",""]),t.exports=e},1945:function(t,e,n){"use strict";n.r(e);var i=n("aad4"),a=n("3733");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("724a");var s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"079c4bfb",null,!1,i["a"],void 0);e["default"]=c.exports},2445:function(t,e,n){"use strict";var i=n("dac7"),a=n.n(i);a.a},2909:function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t)||(0,a.default)(t)||(0,o.default)(t)||(0,s.default)()};var i=c(n("6005")),a=c(n("db90")),o=c(n("06c5")),s=c(n("3427"));function c(t){return t&&t.__esModule?t:{default:t}}},"310c":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".page[data-v-079c4bfb] .u-popup .u-transition{z-index:998!important}.page .comment1[data-v-079c4bfb]{display:flex;align-items:flex-end}.page .comment1 .Pinput[data-v-079c4bfb]{box-sizing:border-box;padding:5px 15px;display:flex;justify-content:flex-start;align-items:flex-start;margin:10px 10px;background-color:#f3f3f3;height:%?120?%;border-radius:15px;margin-right:5px}.page .comment1 uni-button[data-v-079c4bfb]{white-space:normal;font-size:15px;padding:%?10?% %?20?%;height:30px;line-height:30px;display:flex;justify-content:center;align-items:center;border-radius:30px;background-color:#4dade0;color:#fff;margin-bottom:10px}.page .comment1[data-v-079c4bfb] .button-hover{background-color:#468bb0}.page .plate[data-v-079c4bfb]{padding:25px 15px;margin-bottom:10px;background-color:#fff}.page .container[data-v-079c4bfb]{background-color:#f6f6f6;padding-bottom:50px}.page .container .bigTitle[data-v-079c4bfb]{font-weight:bolder;border-left:#4dade0 solid 10px;padding-left:10px;margin-left:-15px;line-height:25px}.page .container .plate1 .desc[data-v-079c4bfb]{font-size:13px;margin:%?20?% 0 %?40?% 0;line-height:23px;font-weight:700;color:#646464;letter-spacing:1px}.page .container .plate1 .swiperImg[data-v-079c4bfb]{border-radius:%?6?%}.page .container .plate1 .bottom[data-v-079c4bfb]{display:flex;justify-content:space-between;align-items:center;color:rgba(0,0,0,.23137254901960785);font-size:10px;font-weight:700;padding-top:30px\n}.page .container .plate1 .publishTime[data-v-079c4bfb]{width:50%;text-align:right}.page .container .plate2[data-v-079c4bfb]{padding:20px 0 0 0}.page .container .plate2 .bigTitle[data-v-079c4bfb]{margin-left:0;margin-bottom:5px}.page .container .plate2 .row[data-v-079c4bfb]{display:flex;justify-content:space-between;align-items:center;margin:0 15px;border-bottom:%?2?% solid hsla(0,0%,50.2%,.2196078431372549)}.page .container .plate2 .row[data-v-079c4bfb]:last-child{border-bottom:none}.page .container .plate2 .row .title[data-v-079c4bfb]{display:inline-block;line-height:55px;font-weight:700;font-size:14px;white-space:nowrap}.page .container .plate2 .row uni-text[data-v-079c4bfb]{display:inline-block;font-size:14px;color:#575757}.page .container .plate3[data-v-079c4bfb]{background-color:#fff;padding:20px 0}.page .container .plate3 .bigTitle[data-v-079c4bfb]{background-color:#fff;margin:0;margin-bottom:%?30?%}.page[data-v-079c4bfb]{height:calc(100vh - 44px);background-color:#f6f6f6}.page uni-swiper[data-v-079c4bfb]{height:%?700?%}.page uni-swiper uni-image[data-v-079c4bfb]{width:100%;height:100%}.page .entry[data-v-079c4bfb]{font-size:19px;margin:1px 0 0 0;padding:%?20?% %?10?%;width:100%;box-sizing:border-box;display:flex;justify-content:flex-start;align-items:center}.page .comments[data-v-079c4bfb]{border-radius:10px;overflow:hidden;background-color:#f6f6f6}.page .details[data-v-079c4bfb]{border-radius:10px;overflow:hidden}.page .details .row[data-v-079c4bfb]{background-color:#fff;padding:%?20?% %?30?%;margin-bottom:1px}.page .details .row .title[data-v-079c4bfb]{display:inline-block;width:%?170?%;color:#b8b8b8;font-size:14px;text-align:justify;text-align-last:justify;line-height:%?60?%;white-space:nowrap}",""]),t.exports=e},3427:function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},n("d9e2"),n("d401")},3733:function(t,e,n){"use strict";n.r(e);var i=n("6b0f"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"393c":function(t,e,n){t.exports=n.p+"static/img/collected.46dc344e.png"},6005:function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(Array.isArray(t))return(0,i.default)(t)};var i=function(t){return t&&t.__esModule?t:{default:t}}(n("6b75"))},"6b0f":function(t,e,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("4e82");var a,o,s,c,r,l=i(n("2909")),d=i(n("8785")),u=i(n("5530")),f=i(n("8ae1")),p=i(n("d969")),m=i(n("18c0")),v={mixins:[p.default],components:{detailBottom:f.default},data:function(){return{lostItemInfo:{_id:"642d153729c3d62c4727dcef",type:"寻主",classify1:"卡片、证件类",classify2:"身份证",name:"猪猪",date:"2023年3月5日",region:"瑞幸咖啡座位上",phone:651446049,desc:"一看就是花果山摘下来的水蜜桃,失主看到抓紧时间找我领",imgList:[],userInfo:{},time:1680676143340},textareaContent:"",showPopup:!1,collected:!1,repliedData:"",comments:[],commentIndex:-1}},onLoad:function(t){this.loseId=t._id,this.getLoseDetail(),this.getComments()},computed:{commentRef:function(){return this.$refs.comment},textarePlaceholder:function(){var t="";return t=this.repliedData?"回复 @"+this.repliedData.repliedUser.nickname+" ：":"善于结善缘，恶语伤人心",t},publishTime:function(){var t=this.lostItemInfo.time,e=(0,m.default)(t),n=e.format("YYYY-MM-DD HH:mm");return n},detailBottom:function(){return this.$refs.detailBottom},sentComment:function(){return{loseId:this.lostItemInfo._id,userInfo:this.userInfo,content:this.textareaContent}}},methods:{chuli:function(t){return(0,u.default)((0,u.default)({},t),{},{userInfo:JSON.parse(t.userInfo)})},dianzan:function(t,e){var n=this;uni.request({url:this.apiRoot(a||(a=(0,d.default)(["likeComment"]))),data:t,success:function(t){var i=t.data.data;console.log(n.comments[e],i),n.comments[e]=i,n.comments[e].likeUsers=i.likeUsers,n.comments=(0,l.default)(n.comments)}})},toSecondComment:function(){var t=this;if(this.textareaContent){var e=(0,u.default)((0,u.default)({},this.repliedData),{},{time:(new Date).getTime(),content:this.textareaContent,userInfo:this.userInfo,id:this.generateRandomString()});uni.request({url:this.apiRoot(o||(o=(0,d.default)(["replyComment"]))),method:"POST",data:e,success:function(e){console.log(e.data),t.comments[t.commentIndex].secondCommnets=e.data.data,uni.showToast({title:"回复成功",icon:"none"}),t.showPopup=!1,t.commentIndex=-1}})}else uni.showToast({title:"请输入评论!",icon:"none",duration:1500})},secondcomment:function(t){this.repliedData=t,this.showPopup=!0},getComments:function(){var t=this;uni.request({url:this.apiRoot(s||(s=(0,d.default)(["getComments"]))),data:{loseId:this.loseId},success:function(e){t.comments=e.data.data.sort((function(t,e){return e.time-t.time}))}})},toComment:function(){var t=this;if(this.textareaContent){var e=(0,u.default)((0,u.default)({},this.sentComment),{},{time:(new Date).getTime()});uni.request({url:this.apiRoot(c||(c=(0,d.default)(["toComment"]))),data:e,success:function(e){uni.showToast({title:"评论成功",icon:"none"}),t.comments=e.data.data.sort((function(t,e){return e.time-t.time})),t.showPopup=!1}})}else uni.showToast({title:"请输入评论!",icon:"none",duration:1500})},updatePageContent:function(t){this.lostItemInfo=t},getLoseDetail:function(){var t=this;uni.request({url:this.apiRoot(r||(r=(0,d.default)(["loseDetail"]))),data:{_id:this.loseId},success:function(e){var n=e.data[0];t.lostItemInfo=n}})}},watch:{showPopup:function(t){t?(this.checkLoginStatus(),this.userInfo||(this.showPopup=!1)):this.repliedData=""}}};e.default=v},"6db5":function(t,e,n){t.exports=n.p+"static/img/contact.93ae2e8d.png"},"724a":function(t,e,n){"use strict";var i=n("c10b"),a=n.n(i);a.a},8785:function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))},n("fb6a"),n("dca8"),n("1d1c")},"8ae1":function(t,e,n){"use strict";n.r(e);var i=n("db64"),a=n("baa2");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("2445");var s=n("f0c5"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"040b437f",null,!1,i["a"],void 0);e["default"]=c.exports},aad4:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={uPopup:n("3054").default,comment:n("41b2").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"page"},[n("u-popup",{attrs:{show:t.showPopup},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.showPopup=!1}}},[n("v-uni-view",{staticClass:"comment1"},[n("v-uni-textarea",{staticClass:"Pinput",attrs:{"auto-focus":"1",rows:"5",placeholder:t.textarePlaceholder,cols:"30",value:""},model:{value:t.textareaContent,callback:function(e){t.textareaContent=e},expression:"textareaContent"}}),n("v-uni-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.repliedData?t.toSecondComment():t.toComment()}}},[t._v("发送")])],1)],1),n("v-uni-view",{staticClass:"container"},[n("v-uni-view",{staticClass:"plate1 plate"},[n("div",{staticClass:"bigTitle "},[t._v(t._s(t.lostItemInfo.type)+"启事")]),n("div",{staticClass:"desc"},[t._v(t._s(t.lostItemInfo.desc))]),t.lostItemInfo.imgList.length?n("v-uni-swiper",{attrs:{"indicator-dots":!0,autoplay:!1,interval:3e3,duration:500}},t._l(t.lostItemInfo.imgList,(function(e,i){return n("v-uni-swiper-item",{key:i,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewImg(t.lostItemInfo.imgList.map((function(e){return t.apiRoot(e)})),i)}}},[n("v-uni-image",{staticClass:"swiperImg",attrs:{src:t.apiRoot(e),mode:"aspectFill"}})],1)})),1):t._e(),n("v-uni-view",{staticClass:"bottom"},[n("v-uni-view",{staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[n("v-uni-view",{staticClass:"img",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[t.lostItemInfo.userInfo.headimg?n("v-uni-image",{staticStyle:{display:"inline-block",height:"20px",width:"20px","margin-right":"5px","border-radius":"50%"},attrs:{src:t.apiRoot(t.lostItemInfo.userInfo.headimg),mode:"aspectFill"}}):t._e()],1),n("v-uni-text",[t._v(t._s(t.lostItemInfo.userInfo.nickname))])],1),n("div",{staticClass:"publishTime",domProps:{textContent:t._s(t.publishTime)}})],1)],1),n("v-uni-view",{staticClass:"plate2 plate"},[n("div",{staticClass:"bigTitle "},[t._v("失物信息")]),n("v-uni-view",{staticClass:"row"},[n("div",{staticClass:"title"},[t._v("物品名称 ：")]),n("v-uni-text",[t._v(t._s(t.lostItemInfo.name))])],1),n("v-uni-view",{staticClass:"row"},[n("div",{staticClass:"title"},[t._v("失物类别 ：")]),n("v-uni-text",[t._v(t._s(t.lostItemInfo.classify1)+" / "+t._s(t.lostItemInfo.classify2))])],1),n("v-uni-view",{staticClass:"row"},[n("div",{staticClass:"title"},[t._v(t._s("寻主"==t.lostItemInfo.type?"拾到":"遗失")+"时间 ：")]),n("v-uni-text",[t._v(t._s(t.lostItemInfo.date))])],1),n("v-uni-view",{staticClass:"row"},[n("div",{staticClass:"title"},[t._v(t._s("寻主"==t.lostItemInfo.type?"拾到":"遗失")+"地点 ：")]),n("v-uni-text",[t._v(t._s(t.lostItemInfo.region))])],1),n("v-uni-view",{staticClass:"row"},[n("div",{staticClass:"title"},[t._v("联系方式：")]),n("v-uni-text",[t._v(t._s(t.lostItemInfo.phone))])],1)],1),n("v-uni-view",{staticClass:"plate3 plate"},[n("div",{staticClass:"bigTitle"},[t._v("评论("+t._s(t.comments.length)+")")]),t._l(t.comments,(function(e,i){return n("comment",{key:i,ref:"comment",refInFor:!0,attrs:{comment:t.chuli(e)},on:{dianzan:function(e){arguments[0]=e=t.$handleEvent(e),t.dianzan(e,i)},secondcomment:function(e){arguments[0]=e=t.$handleEvent(e),t.secondcomment(e)}},nativeOn:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.commentIndex=i}}})}))],2)],1),n("detailBottom",{ref:"detailBottom",attrs:{lostItemInfo:t.lostItemInfo},on:{showPopup:function(e){arguments[0]=e=t.$handleEvent(e),t.showPopup=!0,t.repliedData=""},getLoseDetail:function(e){arguments[0]=e=t.$handleEvent(e),t.updatePageContent(e)}}})],1)},o=[]},baa2:function(t,e,n){"use strict";n.r(e);var i=n("1282"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},c10b:function(t,e,n){var i=n("310c");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("5c1737b7",i,!0,{sourceMap:!1,shadowMode:!1})},dac7:function(t,e,n){var i=n("15a9");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("60ad04d1",i,!0,{sourceMap:!1,shadowMode:!1})},db64:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"detailBottom"},[i("v-uni-view",{staticClass:"left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.comment.apply(void 0,arguments)}}},[i("v-uni-input",{ref:"myInput",staticClass:"myInput",attrs:{id:"myInput",type:"text",disabled:"1",placeholder:"善于结善缘 , 恶语伤人心~"}})],1),i("v-uni-view",{staticClass:"right"},[i("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.comment.apply(void 0,arguments)}}},[i("v-uni-image",{attrs:{mode:"aspectFit",src:n("6db5")}}),i("v-uni-text",[t._v("评论")])],1),i("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.collect.apply(void 0,arguments)}}},[t.collected?i("v-uni-image",{attrs:{mode:"aspectFit",src:n("393c")}}):i("v-uni-image",{attrs:{mode:"aspectFit",src:n("df36")}}),i("v-uni-text",[t._v("收藏")])],1)],1),t._e()],1)},a=[]},dca8:function(t,e,n){var i=n("23e7"),a=n("bb2f"),o=n("d039"),s=n("861d"),c=n("f183").onFreeze,r=Object.freeze,l=o((function(){r(1)}));i({target:"Object",stat:!0,forced:l,sham:!a},{freeze:function(t){return r&&s(t)?r(c(t)):t}})},df36:function(t,e,n){t.exports=n.p+"static/img/collect.cc222e9a.png"}}]);