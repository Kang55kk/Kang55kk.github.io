(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mine"],{1226:function(t,e,n){"use strict";n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,i,s=a(n("8785"));n("498a"),n("ac1f"),n("00b4");var r={data:function(){return{mode:"logIn",mineItems:[{iconPath:"/static/mine/myPublish.png",text:"我的发布"},{iconPath:"/static/mine/collection.png",text:"修改密码"},{iconPath:"/static/mine/myInfo.png",text:"我的信息"},{iconPath:"/static/mine/logOut.png",text:"退出登录"}],username:uni.getStorageSync("username")||"",password:uni.getStorageSync("password")||"",confirmPassword:""}},computed:{logged:function(){return this.$store.getters.logged}},methods:{signOrLog:function(t){this.mode=t},login_signUp:function(){var t=this,e=this.username,n=this.password;""!==e.trim()?""!==n.trim()?"logIn"==this.mode?uni.request({url:this.apiRoot(o||(o=(0,s.default)(["toLogin"]))),method:"POST",data:{username:e,password:n},success:function(a){200==a.data.code?(uni.setStorageSync("username",e),uni.setStorageSync("password",n),t.$store.commit("changeState",{stateName:"userInfo",val:a.data.userInfo}),setTimeout((function(){uni.showToast({title:"登录成功",icon:"success"})}),0)):uni.showModal({showCancel:!1,title:"错误提示",content:a.data.msg})}}):this.handleRegister():uni.showModal({showCancel:!1,title:"错误提示",content:"密码不能为空！"}):uni.showModal({showCancel:!1,title:"错误提示",content:"用户名不能为空！"})},handleRegister:function(){var t=this,e=Math.floor(21*Math.random()),n={username:this.username,password:this.password,sex:"保密",phone:"",nickname:this.generateRandomNickName(),headimg:"static/random_portrait/".concat(e,".png")};/^[a-zA-Z0-9]{6,20}$/.test(this.username)?this.password.length<7||/\s/.test(this.password)?uni.showToast({title:"密码长度必须大于6且不能含有空格",icon:"none"}):this.password===this.confirmPassword?uni.request({method:"POST",url:this.apiRoot(i||(i=(0,s.default)(["register"]))),data:n,success:function(e){console.log(e),200==e.data.code?(uni.showToast({title:"注册成功",icon:"success"}),t.mode="logIn"):uni.showModal({showCancel:!1,title:"错误提示",content:e.data.msg})}}):uni.showToast({title:"两次输入的密码不一致",icon:"none"}):uni.showToast({title:"帐号由6到20位数字或字母组成！",icon:"none",duration:2500})},goToForgotPassword:function(){},goToRegister:function(){},toPage:function(t){var e=this;switch(t){case 0:uni.navigateTo({url:"/pages/mine/myPublish"});break;case 1:uni.navigateTo({url:"/pages/mine/passwordUpdate"});break;case 2:uni.navigateTo({url:"/pages/mine/myInfo"});break;case 3:uni.showModal({title:"确认提示",content:"是否确认退出登录？",success:function(t){t.confirm&&e.$store.commit("changeState",{stateName:"userInfo",val:""})}});break;default:break}}}};e.default=r},"22ac":function(t,e,n){"use strict";n.r(e);var a=n("ea43"),o=n("93ed");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("4a7b");var s=n("f0c5"),r=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"48576d6f",null,!1,a["a"],void 0);e["default"]=r.exports},"317d":function(t,e,n){t.exports=n.p+"static/img/unlogin.68d8ec94.png"},"4a7b":function(t,e,n){"use strict";var a=n("fed2"),o=n.n(a);o.a},8785:function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))},n("fb6a"),n("dca8"),n("1d1c")},"93ed":function(t,e,n){"use strict";n.r(e);var a=n("1226"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},"9e32":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".page[data-v-48576d6f]{background-color:#f6f6f6;height:100vh}.page .loggedIn uni-view[data-v-48576d6f]{display:flex;justify-content:center;align-items:center}.page .loggedIn .portrait[data-v-48576d6f]{color:#fff;background-color:#4dade0;height:%?460?%}.page .loggedIn .portrait .portrait-content[data-v-48576d6f]{width:25%;flex-direction:column}.page .loggedIn .portrait .portrait-content .img[data-v-48576d6f]{border-radius:50%;background-color:#fff}.page .loggedIn .portrait .portrait-content .img uni-image[data-v-48576d6f]{box-sizing:border-box;width:80px;height:80px;border-radius:50%;display:block;box-shadow:0 0 2px 4px rgba(0,0,0,.4117647058823529)}.page .loggedIn .portrait .portrait-content .name[data-v-48576d6f]{margin-top:%?20?%}.page .loggedIn mine-item[data-v-48576d6f]{width:90%;display:flex;justify-content:center;align-items:center}.page .loggedIn .mineItems[data-v-48576d6f]{width:100%;margin-top:%?-30?%;flex-direction:column}.page .notLoggedIn[data-v-48576d6f]{background-color:#fbfbfb;height:100vh;overflow:hidden}.page .notLoggedIn *[data-v-48576d6f]{box-sizing:border-box}.page .notLoggedIn .login[data-v-48576d6f]{max-width:100vw;margin:0 auto;text-align:center;padding:0 %?100?%}.page .notLoggedIn .avatar[data-v-48576d6f]{margin-top:%?150?%;margin-bottom:30px}.page .notLoggedIn .avatar .avatar-img[data-v-48576d6f]{width:%?300?%;height:%?300?%}.page .notLoggedIn .form[data-v-48576d6f]{margin-bottom:30px}.page .notLoggedIn .form .form-group[data-v-48576d6f]{margin-bottom:20px}.page .notLoggedIn .form .form-group .form-control[data-v-48576d6f]{text-align:left;width:100%;height:40px;padding:10px;padding-left:25px;border-radius:20px;border:none;outline:none;box-shadow:0 1px 3px rgba(0,0,0,.2)}.page .notLoggedIn .form .form-group .form-control[data-v-48576d6f]::-webkit-input-placeholder{color:#ccc;font-size:14px}.page .notLoggedIn .form .form-group .form-control[data-v-48576d6f]::placeholder{color:#ccc;font-size:14px}.page .notLoggedIn .form .btn-primary[data-v-48576d6f]{height:40px;line-height:40px;border-radius:20px}.page .notLoggedIn .link[data-v-48576d6f]{display:flex;justify-content:center;align-items:center;margin:%?15?% %?30?%}.page .notLoggedIn .link .link-item[data-v-48576d6f]{color:#007aff;text-decoration:none;font-size:14px;transition:all .2s ease-in-out}.page .notLoggedIn .link .link-item[data-v-48576d6f]:hover{color:#0065cc}",""]),t.exports=e},dca8:function(t,e,n){var a=n("23e7"),o=n("bb2f"),i=n("d039"),s=n("861d"),r=n("f183").onFreeze,d=Object.freeze,c=i((function(){d(1)}));a({target:"Object",stat:!0,forced:c,sham:!o},{freeze:function(t){return d&&s(t)?d(r(t)):t}})},ea43:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var a={mineItem:n("1f42").default},o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"page"},[t.logged?a("v-uni-view",{staticClass:"loggedIn"},[a("v-uni-view",{staticClass:"portrait"},[a("v-uni-view",{staticClass:"portrait-content"},[a("v-uni-view",{staticClass:"img"},[a("v-uni-image",{attrs:{src:t.apiRoot(t.userInfo.headimg),mode:"aspectFill"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.previewImg([t.apiRoot(t.userInfo.headimg)],0)}}})],1),a("v-uni-view",{staticClass:"name"},[t._v(t._s(t.userInfo.nickname))])],1)],1),a("v-uni-view",{staticClass:"mineItems"},t._l(t.mineItems,(function(e,n){return a("mineItem",{attrs:{mineItem:e},nativeOn:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toPage(n)}}})})),1)],1):t._e(),t.logged?t._e():a("v-uni-view",{staticClass:"notLoggedIn"},[a("v-uni-view",{staticClass:"login"},[a("v-uni-view",{staticClass:"avatar"},[a("v-uni-image",{staticClass:"avatar-img",attrs:{src:n("317d"),mode:"aspectFit"}})],1),a("v-uni-form",{staticClass:"form"},[a("v-uni-view",{staticClass:"form-group"},[a("v-uni-input",{staticClass:"form-control",attrs:{type:"text",placeholder:"请输入账号"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),"logIn"==t.mode&&t.login_signUp()}},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),a("v-uni-view",{staticClass:"form-group"},[a("v-uni-input",{staticClass:"form-control",attrs:{type:"password",placeholder:"请输入密码"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),"logIn"==t.mode&&t.login_signUp()}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("v-uni-view",{staticClass:"form-group"},["signUp"==t.mode?a("v-uni-input",{staticClass:"form-control",attrs:{type:"password",placeholder:"请再次输入密码"},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}}):t._e()],1),a("v-uni-button",{staticClass:"btn btn-primary",attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.login_signUp.apply(void 0,arguments)}}},[t._v(t._s("logIn"==t.mode?"登  录":"注  册"))])],1),a("v-uni-view",{staticClass:"link"},["logIn"==t.mode?a("v-uni-view",{staticClass:"link-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.signOrLog("signUp")}}},[t._v("注册账号")]):t._e()],1),a("v-uni-view",{staticClass:"link"},["signUp"==t.mode?a("v-uni-view",{staticClass:"link-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.signOrLog("logIn")}}},[t._v("返回登录")]):t._e()],1)],1)],1)],1)},i=[]},fed2:function(t,e,n){var a=n("9e32");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("4f06").default;o("21d9912e",a,!0,{sourceMap:!1,shadowMode:!1})}}]);