(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mine-myInfo"],{"0a6e":function(e,t,i){"use strict";var n=i("af5f"),a=i.n(n);a.a},"3a01":function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return n}));var n={uPicker:i("08d2").default,uButton:i("6391").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"page"},[n("v-uni-view",{staticClass:"none"},[n("u-picker",{attrs:{closeOnClickOverlay:!0,show:e.showPicker,itemHeight:"100",columns:e.columns},on:{cancel:function(t){arguments[0]=t=e.$handleEvent(t),e.showPicker=!1},close:function(t){arguments[0]=t=e.$handleEvent(t),e.showPicker=!1},confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.pickerConfirm.apply(void 0,arguments)}}})],1),n("v-uni-view",{staticClass:"rowBox"},[n("v-uni-view",{staticClass:"row",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changePortrait.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"left"},[e._v("头像")]),n("v-uni-view",{staticClass:"right"},[n("v-uni-image",{attrs:{src:e.apiRoot(e.myInfo.headimg),mode:"aspectFill"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=e.$handleEvent(t),e.previewImg([e.apiRoot(e.myInfo.headimg)],0)}}}),e.editMode?n("v-uni-image",{attrs:{src:i("e03e"),mode:""}}):e._e()],1)],1)],1),n("v-uni-view",{staticClass:"rowBox"},[n("v-uni-view",{staticClass:"row"},[n("v-uni-view",{staticClass:"left"},[e._v("昵称")]),n("v-uni-view",{staticClass:"right"},[n("v-uni-input",{attrs:{type:"text",disabled:!e.editMode},model:{value:e.myInfo.nickname,callback:function(t){e.$set(e.myInfo,"nickname",t)},expression:"myInfo.nickname"}})],1)],1)],1),n("v-uni-view",{staticClass:"rowBox"},[n("v-uni-view",{staticClass:"row"},[n("v-uni-view",{staticClass:"left"},[e._v("性别")]),n("v-uni-view",{staticClass:"right"},[n("v-uni-input",{attrs:{type:"text",disabled:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.pickerChoose("sex")}},model:{value:e.myInfo.sex,callback:function(t){e.$set(e.myInfo,"sex",t)},expression:"myInfo.sex"}}),e.editMode?n("v-uni-image",{attrs:{src:i("e03e"),mode:""}}):e._e()],1)],1)],1),n("v-uni-view",{staticClass:"rowBox"},[n("v-uni-view",{staticClass:"row"},[n("v-uni-view",{staticClass:"left"},[e._v("联系方式")]),n("v-uni-view",{staticClass:"right"},[n("v-uni-input",{attrs:{type:"text",disabled:!e.editMode},model:{value:e.myInfo.phone,callback:function(t){e.$set(e.myInfo,"phone",t)},expression:"myInfo.phone"}})],1)],1)],1),n("v-uni-view",{staticClass:"btn"},[e.editMode?n("u-button",{attrs:{type:"success",text:"保存修改"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.btnsFunc("save")}}}):n("u-button",{attrs:{type:"primary",text:"修改信息"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.btnsFunc("modify")}}})],1)],1)},o=[]},"462c":function(e,t,i){"use strict";i("7a82");var n=i("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("e9c4");var a,o=n(i("8785")),s=n(i("c7eb")),c=n(i("1da1")),u=n(i("5530")),r=n(i("d969")),d="",l={mixins:[r.default],beforeCreate:function(){d=_.cloneDeep(this.$store.state.userInfo)},data:function(){return{headimg:"",keyName:"",editMode:!1,columns:[["男","女","保密"]],showPicker:!1,myInfo:(0,u.default)({},d)}},methods:{changePortrait:function(){var e=this;return(0,c.default)((0,s.default)().mark((function t(){return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.editMode){t.next=2;break}return t.abrupt("return");case 2:uni.chooseImage({count:1,success:function(){var t=(0,c.default)((0,s.default)().mark((function t(i){var n;return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=JSON,t.next=3,e.uploadImg(i.tempFilePaths[0]);case 3:t.t1=t.sent,n=t.t0.parse.call(t.t0,t.t1),e.headimg=n[0].path.split("\\").join("/"),e.$set(e.myInfo,"headimg",n[0].path.split("\\").join("/"));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()});case 3:case"end":return t.stop()}}),t)})))()},btnsFunc:function(e){var t=this;"modify"==e?(uni.showToast({title:"修改信息",duration:1e3,icon:"none"}),this.editMode=!0):"save"==e&&(console.log(this.myInfo),uni.request({url:this.apiRoot(a||(a=(0,o.default)(["updateUserInfo"]))),method:"POST",data:(0,u.default)((0,u.default)({},this.myInfo),{},{headimg:this.headimg}),success:function(e){console.log("res: "+JSON.stringify(e)),uni.showToast({title:"修改成功",duration:1500}),t.$store.commit("changeState",{stateName:"userInfo",val:t.myInfo})}}),this.editMode=!1)},pickerChoose:function(e){this.editMode&&(this.keyName=e,this.showPicker=!0)},pickerConfirm:function(e){"sex"==this.keyName&&this.$set(this.myInfo,"sex",e.value[0]),this.showDatePicker=!1,this.showPicker=!1}}};t.default=l},"86fe":function(e,t,i){"use strict";i.r(t);var n=i("462c"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=a.a},af5f:function(e,t,i){var n=i("c78e");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("fb427918",n,!0,{sourceMap:!1,shadowMode:!1})},c78e:function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,"uni-view[data-v-137c0e21]{display:flex;justify-content:center;align-items:center}uni-input[data-v-137c0e21]{text-align:right}.page[data-v-137c0e21]{height:100vh;font-size:14px;font-weight:550;flex-direction:column;justify-content:flex-start}.page[data-v-137c0e21] .u-button{width:300px}.page .btn[data-v-137c0e21]{width:100vw;position:fixed;bottom:50px}.page .rowBox[data-v-137c0e21]{background-color:#fff}.page .row[data-v-137c0e21]{min-height:%?120?%;width:calc(100vw - %?60?%);justify-content:space-between;box-sizing:border-box;padding:%?20?%;margin:0 %?30?%;border-bottom:1px solid #e0e0e0}.page .row .right uni-image[data-v-137c0e21]:nth-child(1){width:%?120?%;border-radius:50%;height:%?120?%;border:3px solid #4dade0}.page .row .right uni-image[data-v-137c0e21]:nth-child(2){width:%?50?%;height:%?50?%;margin-right:%?-30?%}",""]),e.exports=t},f304:function(e,t,i){"use strict";i.r(t);var n=i("3a01"),a=i("86fe");for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);i("0a6e");var s=i("f0c5"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"137c0e21",null,!1,n["a"],void 0);t["default"]=c.exports}}]);